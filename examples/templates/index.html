<!doctype html>
<html>
<head>
    <script src="../../build/output/playcanvas-latest.js"></script>
    <link href="../style.css" rel="stylesheet" />
</head>

<body>
<!-- The canvas element -->
<canvas id="application-canvas"></canvas>


<!-- The script -->
<script>
  var boxJson = {
    "entities" : {
      "e7d00523-5be1-11e9-b7c6-8c8590702577": {
        "position": [
          0,
          0.5,
          0
        ],
        "scale": [
          1,
          1,
          1
        ],
        "name": "Box",
        "parent": null,
        "resource_id": "e7d00523-5be1-11e9-b7c6-8c8590702577",
        "components": {
          "model": {
            "layers": [
              0
            ],
            "isStatic": false,
            "castShadows": true,
            "castShadowsLightmap": true,
            "lightmapped": false,
            "materialAsset": null,
            "receiveShadows": true,
            "enabled": true,
            "castShadowsLightMap": false,
            "asset": null,
            "type": "box",
            "lightmapSizeMultiplier": 1,
            "batchGroupId": null
          }
        },
        "rotation": [
          0,
          0,
          0
        ],
        "tags": [],
        "enabled": true,
        "children": []
      }
    }
  };


  var canvas = document.getElementById("application-canvas");

  // Create the app and start the update loop
  var app = new pc.Application(canvas);
  app.start();

  // Set the canvas to fill the window and automatically change resolution to be the same as the canvas size
  app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
  app.setCanvasResolution(pc.RESOLUTION_AUTO);

  app.scene.ambientLight = new pc.Color(0.2, 0.2, 0.2);


 //  var parser = new pc.SceneParser(app);
  // var templateRoot = parser.parse(boxJson);
  // app.root.addChild(templateRoot);


  var url = "../assets/template_assets/cube_template.json";

  app.assets.loadFromUrl(url, 'template', function (err, asset) {

      var entity = asset.resource.instantiate();
      // var parser = new pc.SceneParser(app);
      // var templateRoot = parser.parse(boxJson);
     app.root.addChild(entity);

  });


  // Create an Entity with a camera component
  var camera = new pc.Entity();
  camera.addComponent("camera", {
    clearColor: new pc.Color(0.4, 0.45, 0.5)
  });
  camera.translate(0, 7, 24);
  app.root.addChild(camera);

  // Create an Entity with a point light component
  var light = new pc.Entity();
  light.addComponent("light", {
    type: "point",
    color: new pc.Color(1, 1, 1),
    range: 100,
    castShadows: true
  });
  light.translate(5, 0, 15);
  app.root.addChild(light);


</script>
</body>
</html>
